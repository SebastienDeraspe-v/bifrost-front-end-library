# Contribute
Create or update an Angular or Twig element in the Design System.

<br/>

We currently support 2 frameworks: **Angular and Twig**.

Basically, there are 5 kinds of elements:
- **Components**
- **Organisms** (more complex components)
- **Templates** (to help build with components)
- **Pipes**
- **Styles** (e.g. Sass variables)
 
> All theses elements are build and publish as an **NPM package**.

<br/>

**Frequent questions:**

- [Zeroheight: How to know if the component should be on the Design System?]()
- [Other documentation...]()

<br/>

## 1. Clone the repository

Clone [the Design System repository]() on your local machine and choose the version you want to work on: 

```
git clone <url>
git checkout v0.1.0
```

[Changelogs: List of all versions]()

## 2. Generate the component's structure
**Optional: Only if you want to create a new component.**

We created a command that will help you start a new component: 

```bash
# From the root of the repo, enter:
npm run generate

# It will ask you the type of element you want to create (component, template, pipes, ...).
# Then, enter the name of your component. Use dash format like 'form-radio-button'.
# The structure of your new component is ready:
# /component-name/angular/component-name.component.html
# /component-name/angular/component-name.component.ts
# /component-name/angular/component-name.component.spec.ts
# /component-name/angular/component-name.module.ts
# /component-name/twig/component-name.twig
# /component-name/common/style.scss
# /component-name/docs.stories.mdx

# If you want to see it, launch Storybook:
npm run storybook
```


<br/>

This command will:
- Copy `.templates/component-structure` folder and paste it in `/lib/components`.
- Then you will have starter files for Angular and Twig.
- Expose your new component in `public-api.ts`.

## 3. Develop it
Storybook provides an environment to develop in isolation. Let's open it:

`npm run storybook`

<br/>

Open **[http://localhost:9008]()** on your browser and find the page of your component on the sidebar.

**Et voila! Your environment is set up :)**

<br/>

<small>

**Note:** Since **Drupal** components are server side, you need to refresh the browser to see changes during development.

</small>

<br/>

**Ready to push? Make sure component is:**

- [x] Accessible (use [Axe]() inside Storybook panel or [Pa11y](https://github.com/pa11y/pa11y)) 
- [x] Agnostic / Universal
- [x] Content resilient
- [x] Responsive
- [x] Using design tokens from _variables.scss
- [x] API is consistent with other components
- [x] Unit test?

> **Component API:** As much as possible, try to use the **same component API** and the **same CSS** for Angular and Drupal.

> **Document Component States:** You could add stories to showcase the different states of your component. Just add them in `doc.stories.ts`.

## 4. _(Angular only)_ Export component
Export Module and/or Component files in `/lib/public-api.ts`.

## 5. Build library

Increment the version in `package.json` with the pattern: **MAJOR.MINOR.PATCH**. 
> If it's a major or minor change, Design System team should be warn.

Then build and publish:
```Shell
# Don't forget to increment the package version in packages.json.
# This command will build and publish a new version.
npm run publish
```
Your package version is now available for everyone.
You could check availability on the [NPM registry]() page.

## 6. Test Angular implementation
**Angular showcase Project** is aimed to showcase implementation.

Located here: `projects/angular-showcase`.

Serve the project:

`ng serve angular-showcase`

Update the library:

`npm i bifrost-front-end-library@<your-new-version>`

Import the new component in App Module (`projects/angular-showcase/src/app/app.module.ts`).

Now, you will be able to add your component in a file (e.g. `app.component.html`).

## 6. Test Drupal implementation
**Drupal showcase Project** is aimed to showcase implementation.

- Install Drupal in **/drupal-showcase** folder. Mac or Window install...
- Open Drupal Admin Page and check that **bifrost** theme is active.
- TODO: Install with local npm package / npm in registry.
- TODO: Check visual regression with BackStopJS.

```bash
```

<br/>

## 7. Communicate
- Slack Channel?

<br/><br/>

### Browser compatibility
Launch `npx browserslist` to know our current support of browser.

<br/>

### Need help?
Contact xxx@xxx.com